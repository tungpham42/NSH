/**
* Preset resources for Like 2 Unlock
* for jQuery: http://onepress-media.com/plugin/like-2-unlock-for-facebook/get
* for Wordpress: http://onepress-media.com/plugin/like-2-unlock-for-facebook-wordpress/get
*
* Copyright 2012, OnePress, http://onepress-media.com/portfolio
* Help Desk: http://support.onepress-media.com/
*/

(function ($) {

    if (!$.onepress) $.onepress = {};
    if (!$.onepress.lang) $.onepress.lang = {};

    $.onepress.lang.tolike = {

        defaultMessage: 'This content is locked. Please like us to view the hidden content.',
        loginMessage: 'You must sign in with Facebook to unlock.',   
        orWait: 'or wait',
        close: 'Close'
    };
})(jQuery);;;

(function(a){if(!a.onepress){a.onepress={};}if(!a.onepress.tools){a.onepress.tools={};}a.onepress.tools.cookie=a.onepress.tools.cookie||function(e,k,f){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(k))||k===null||k===undefined)){f=a.extend({},f);if(k===null||k===undefined){f.expires=-1;}if(typeof f.expires==="number"){var b=f.expires,j=f.expires=new Date();j.setDate(j.getDate()+b);}k=String(k);return(document.cookie=[encodeURIComponent(e),"=",f.raw?k:encodeURIComponent(k),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join(""));}f=k||{};var c=f.raw?function(i){return i;}:decodeURIComponent;var h=document.cookie.split("; ");for(var d=0,g;g=h[d]&&h[d].split("=");d++){if(c(g[0])===e){return c(g[1]||"");}}return null;};a.onepress.tools.hash=a.onepress.tools.hash||function(e){var c=0;if(e.length==0){return c;}for(var d=0;d<e.length;d++){var b=e.charCodeAt(d);c=((c<<5)-c)+b;c=c&c;}c=c.toString(16);c=c.replace("-","0");return c;};a.onepress.logger=function(b){this.element=b;this.element.css({display:"block",boxSizing:"border-box",width:"100%",padding:"20px",marginTop:"20px",marginBottom:"20px",backgroundColor:"black",color:"white",font:"normal normal 12px/14px Arial, serif"});this._colors={debug:"#bbbbbb",info:"#ffffff",warn:"#fbec5d",error:"#de3163",fatal:"#ff0000"};this._log=function(e,f,d){var c=this._colors[e];var h=this._getTime();var g=a('<div style="overflow: hidden; padding-bottom: 8px;"></div>');a("<div style='width: 65px; float: left; color: "+c+"'>"+h+"</div>").appendTo(g);a("<div style='width: 58px; float: left; color: "+c+"'>["+e+"]</div>").appendTo(g);if(typeof f==="string"){a("<div style='margin-left: 123px; color: "+c+"'>"+f+"</div>").appendTo(g);}else{a("<div style='margin-left: 123px; color: "+c+"'>"+this._displayProperties(f,d)+"</div>").appendTo(g);}g.appendTo(this.element);};this.debug=function(d,c){this._log("debug",d,c);};this.info=function(d,c){this._log("info",d,c);};this.warn=function(d,c){this._log("warn",d,c);};this.error=function(d,c){this._log("error",d,c);};this.fatal=function(d,c){this._log("fatal",d,c);};this._getTime=function(){var c=new Date();var d=c.getHours();var e=c.getMinutes();var f=c.getSeconds();return(d+":"+e+":"+f);};this._displayProperties=function(f,e,d,g){var i="";var c=0;if(!g){g="";}if(!d){d=0;}for(var h in f){c++;i+=g+"["+c+"] "+h+" = "+f[h]+"<br />";if(e!=0&&d<=e&&typeof(f[h])=="object"){i+=this._displayProperties(f[h],e,d+1,g+"&nbsp;&nbsp;");}if(c>=80){break;}}return i;};},a.onepress.widget=function(c,d){var b={createWidget:function(e,f){var g=a.extend(true,{},d);g.element=a(e);g.options=a.extend(true,g.options,f);if(g._init){g._init();}if(g._create){g._create();}a.data(e,"plugin_"+c,g);},callMethod:function(f,e){f[e]&&f[e]();}};a.fn[c]=function(){var e=arguments;var f=arguments.length;this.each(function(){var g=a.data(this,"plugin_"+c);if(!g&&f<=1){b.createWidget(this,f?e[0]:false);}else{if(f==1){b.callMethod(g,e[0]);}}});return this;};};a.onepress.isMobile=function(){return(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent));};a.onepress.addParamToUrl=function(d,b,f){var e=new RegExp("(\\?|\\&)"+b+"=.*?(?=(&|$))"),c=/\?.+$/;if(e.test(d)){return d.replace(e,"$1"+b+"="+f);}else{if(c.test(d)){return d+"&"+b+"="+f;}else{return d+"?"+b+"="+f;}}};a.onepress.getParamsFromUrl=function(c){var d={};var b=c.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(f,e,g){d[e]=g;});return d;};})(jQuery);/*
 * URL.js
 *
 * Copyright 2011 Eric Ferraiuolo
 * https://github.com/ericf/urljs
 */
var URL=function(){var a=this;if(!(a&&a.hasOwnProperty&&(a instanceof URL))){a=new URL();}return a._init.apply(a,arguments);};(function(){var a="absolute",v="relative",m="http",n="https",d=":",y="//",c="@",e=".",x="/",f="..",g="../",u="?",i="=",b="&",k="#",h="",C="type",w="scheme",G="userInfo",l="host",s="port",r="path",t="query",j="fragment",F=/^(?:(https?:\/\/|\/\/)|(\/|\?|#)|[^;:@=\.\s])/i,D=/^(?:(https?):\/\/|\/\/)(?:([^:@\s]+:?[^:@\s]+?)@)?((?:[^;:@=\/\?\.\s]+\.)+[A-Za-z0-9\-]{2,})(?::(\d+))?(?=\/|\?|#|$)([^\?#]+)?(?:\?([^#]+))?(?:#(.+))?/i,E=/^([^\?#]+)?(?:\?([^#]+))?(?:#(.+))?/i,q="object",z="string",B=/^\s+|\s+$/g,A,o,p;A=String.prototype.trim?function(H){return(H&&H.trim?H.trim():H);}:function(I){try{return I.replace(B,h);}catch(H){return I;}};o=function(H){return(H&&typeof H===q);};p=function(H){return typeof H===z;};URL.ABSOLUTE=a;URL.RELATIVE=v;URL.normalize=function(H){return new URL(H).toString();};URL.resolve=function(H,I){return new URL(H).resolve(I).toString();};URL.prototype={_init:function(H){this.constructor=URL;H=p(H)?H:H instanceof URL?H.toString():null;this._original=H;this._url={};this._isValid=this._parse(H);return this;},toString:function(){var M=this._url,N=[],L=M[C],K=M[w],I=M[r],J=M[t],H=M[j];if(L===a){N.push(K?(K+d+y):y,this.authority());if(I&&I.indexOf(x)!==0){I=x+I;}}N.push(I,J?(u+this.queryString()):h,H?(k+H):h);return N.join(h);},original:function(){return this._original;},isValid:function(){return this._isValid;},isAbsolute:function(){return this._url[C]===a;},isRelative:function(){return this._url[C]===v;},isHostRelative:function(){var H=this._url[r];return(this.isRelative()&&H&&H.indexOf(x)===0);},type:function(){return this._url[C];},scheme:function(H){return(arguments.length?this._set(w,H):this._url[w]);},userInfo:function(H){return(arguments.length?this._set(G,H):this._url[G]);},host:function(H){return(arguments.length?this._set(l,H):this._url[l]);},domain:function(){var H=this._url[l];return(H?H.split(e).slice(-2).join(e):undefined);},port:function(H){return(arguments.length?this._set(s,H):this._url[s]);},authority:function(){var J=this._url,K=J[G],H=J[l],I=J[s];return[K?(K+c):h,H,I?(d+I):h,].join(h);},path:function(H){return(arguments.length?this._set(r,H):this._url[r]);},query:function(H){return(arguments.length?this._set(t,H):this._url[t]);},queryString:function(K){if(arguments.length){return this._set(t,this._parseQuery(K));}K=h;var J=this._url[t],H,I;if(J){for(H=0,I=J.length;H<I;H++){K+=J[H].join(i);if(H<I-1){K+=b;}}}return K;},fragment:function(H){return(arguments.length?this._set(j,H):this._url[j]);},resolve:function(J){J=(J instanceof URL)?J:new URL(J);var I,H;if(!(this.isValid()&&J.isValid())){return this;}if(J.isAbsolute()){return(this.isAbsolute()?J.scheme()?J:new URL(J).scheme(this.scheme()):J);}I=new URL(this.isAbsolute()?this:null);if(J.path()){if(J.isHostRelative()||!this.path()){H=J.path();}else{H=this.path().substring(0,this.path().lastIndexOf(x)+1)+J.path();}I.path(this._normalizePath(H)).query(J.query()).fragment(J.fragment());}else{if(J.query()){I.query(J.query()).fragment(J.fragment());}else{if(J.fragment()){I.fragment(J.fragment());}}}return I;},reduce:function(I){I=(I instanceof URL)?I:new URL(I);var H=this.resolve(I);if(this.isAbsolute()&&H.isAbsolute()){if(H.scheme()===this.scheme()&&H.authority()===this.authority()){H.scheme(null).userInfo(null).host(null).port(null);}}return H;},_parse:function(J,I){J=A(J);if(!(p(J)&&J.length>0)){return false;}var K,H;if(!I){I=J.match(F);I=I?I[1]?a:I[2]?v:null:null;}switch(I){case a:K=J.match(D);if(K){H={};H[C]=a;H[w]=K[1]?K[1].toLowerCase():undefined;H[G]=K[2];H[l]=K[3].toLowerCase();H[s]=K[4]?parseInt(K[4],10):undefined;H[r]=K[5]||x;H[t]=this._parseQuery(K[6]);H[j]=K[7];}break;case v:K=J.match(E);if(K){H={};H[C]=v;H[r]=K[1];H[t]=this._parseQuery(K[2]);H[j]=K[3];}break;default:return(this._parse(J,a)||this._parse(J,v));break;}if(H){this._url=H;return true;}else{return false;}},_parseQuery:function(M){if(!p(M)){return;}M=A(M);var J=[],L=M.split(b),K,H,I;for(H=0,I=L.length;H<I;H++){if(L[H]){K=L[H].split(i);J.push(K[1]?K:[K[0]]);}}return J;},_set:function(H,I){this._url[H]=I;if(I&&(H===w||H===G||H===l||H===s)){this._url[C]=a;}if(!I&&H===l){this._url[C]=v;}this._isValid=this._parse(this.toString());return this;},_normalizePath:function(K){var M,L,N,J,H,I;if(K.indexOf(g)>-1){M=K.split(x);N=[];for(H=0,I=M.length;H<I;H++){L=M[H];if(L===f){N.pop();}else{if(L){N.push(L);}}}J=N.join(x);if(K[0]===x){J=x+J;}if(K[K.length-1]===x&&J.length>1){J+=x;}}else{J=K;}return J;}};}());/*
 * jQuery Migrate - v1.2.1 - 2013-05-08
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
if(!jQuery.uaMatch){jQuery.uaMatch=function(b){b=b.toLowerCase();var a=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];return{browser:a[1]||"",version:a[2]||"0"};};}if(!jQuery.browser){matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}if(browser.chrome){browser.webkit=true;}else{if(browser.webkit){browser.safari=true;}}jQuery.browser=browser;}(function(a){if(!a.onepress){a.onepress={};}if(a.onepress.facebook){return;}a.onepress.facebook={_sdkScriptId:"facebook-jssdk",_root:null,_eventsCreated:false,_isConnected:false,_isLoaded:false,_loggedIntoFacebook:false,_isFB:function(){return(typeof(window.FB)==="object");},_isSdkconnected:function(){return(a("#"+this._sdkScriptId).length>0||a("script[src='^http://connect.facebook.net/']").length>0);},_isSdkLoading:function(){return !this._isFB()&&this._isSdkconnected();},_isSdkNotLoaded:function(){return !this._isFB()&&!this._isSdkconnected();},_isSdkLoaded:function(){return this._isFB();},setLogger:function(b){this._logger=b;},loadSDK:function(b,d,c){this._appId=b;this._logger&&this._logger.debug("Entry point: $.onepress.facebook.loadSDK. [loadSDK]");if(c){if(this._isLoaded){this._logger&&this._logger.debug("Due to Facebook SDK was loaded, the callback is called directly in $.onepress.facebook.loadSDK. [loadSDK]");c();}else{this._logger&&this._logger.debug("A thread is waiting the SDK inclusion. [loadSDK]");this.bind("fb-init",function(){c();});}}this._createEvents(b);if(this._isSdkNotLoaded()){this._logger&&this._logger.debug("Facebook SDK in not included yet. Including... [loadSDK]");if(this._isConnected||this._isLoaded){return;}this._createRoot();var e=document.createElement("script");e.type="text/javascript";e.id=this._sdkScriptId;e.src="http://connect.facebook.net/"+d+"/all.js";this._root.after(e);a.onepress.facebook._isConnected=true;this._logger&&this._logger.info("Facebook SDK was included. [loadSDK]");}},_createRoot:function(){this._root=a("#fb-root");if(this._root.length==0){this._root=a("<div id='fb-root'></div>").appendTo(a("body"));this._logger&&this._logger.info("Facebook Root element was created. [loadSDK]");}},_createEvents:function(b,c){var e=this;if(this._eventsCreated&&!c){return;}this._eventsCreated=true;this._logger&&this._logger.debug("Creating Facebook Events... [_createEvents]");if(this._isSdkLoading()||this._isSdkNotLoaded()){this._logger&&this._logger.info("Events were subscribed to fbAsyncInit function. [_createEvents]");var d=null;if(window.fbAsyncInit&&!c){d=window.fbAsyncInit;}window.fbAsyncInit=function(){if(d){d();}e._fbInit(b);e._fbInitEvents();e._isLoaded=true;a(document).trigger("fb-init");window.fbAsyncInit=function(){};};}else{this._logger&&this._logger.warn("Events are called directly. [_createEvents]");if(this._isSdkLoaded()){this._fbInit(b);}this._fbInitEvents();e._isLoaded=true;a(document).trigger("fb-init");}},_fbInit:function(b){window.FB.init({appId:b,status:true,cookie:true,xfbml:true});window.FB.init=function(){};},_fbInitEvents:function(){var b=this;window.FB.Event.subscribe("edge.create",function(c){a(document).trigger("fb-like",[c]);});window.FB.Event.subscribe("edge.remove",function(c){a(document).trigger("fb-dislike",c);});window.FB.Event.subscribe("xfbml.render",function(){a(document).trigger("fb-render");});},renderWidget:function(c){var d=c.data("facebook-widget");if(d){var b=d.getHtmlToRender();b.find(".fake-fb-like").addClass("fb-like");window.FB.XFBML.parse(b[0]);c.trigger("fb-render");}},bind:function(c,b){a(document).bind(c,b);},isLogged:function(b){this._logger&&this._logger.debug("Entry point: $.onepress.isLogged [isLogged]");if(this._isLoginChecked){this._logger&&this._logger.debug("The login state is already checked. Returning the saved values. [isLogged]");b(this._auth,this._isLoggetInto);return;}var c=this;if(this._loginStateisChecking){this._logger&&this._logger.debug("The login state is checking. A thread is waiting. [isLogged]");a(document).bind("fb-is-logged",function(){b(c._auth,c._isLoggetInto);});return;}this._loginStateisChecking=true;this._logger&&this._logger.debug("Starting to check the login state... [isLogged]");window.FB.getLoginStatus(function(d){c._isLoginChecked=true;c._isLoggetInto=!(d.status=="unknown");c._auth=d&&d.authResponse;c._logger&&c._logger.info("The login state is got successfully. [login]");c._logger&&c._logger.debug("Access Token: "+(c._auth&&c._auth.accessToken));c._logger&&c._logger.debug("Is Logged In: "+c._isLoggetInto);b(d&&d.authResponse,!(d.status=="unknown"));c._loginStateisChecking=false;a(document).trigger("fb-is-logged");});},login:function(g,d,b){var e=this;this._logger&&this._logger.debug("Entry point: $.onepress.login [login]");var c=a.onepress.facebook.permissions?a.onepress.facebook.permissions+",user_likes":"user_likes";if(g){d=a.onepress.addParamToUrl(d,"l2u",true);var f="https://www.facebook.com/dialog/oauth?client_id="+this._appId+"&redirect_uri="+encodeURIComponent(d)+"&scope="+c+"&response_type=token";window.location.href=f;}else{window.FB.login(function(h){e._auth=h&&h.authResponse;e._isLoggetInto=h&&!(h.status=="unknown");e._isLoginChecked=true;e._logger&&e._logger.info("The login is made. [login]");e._logger&&e._logger.debug(e._auth,2);e._logger&&e._logger.debug("Access Token: "+(e._auth&&e._auth.accessToken));e._logger&&e._logger.debug("Is Logged In: "+e._isLoggetInto);b(h&&h.authResponse);},{scope:c});}},isUrlLiked:function(e,b){var d=this;function c(f){return f&&parseInt(f)>0;}this.getPageIdByUrl(e,function(g,f){if(!c(g)){b(false,"Unable to get a Facebook page id of the specified URL to check whether a user likes the URL or not. Use the Soft Mode or set other URL. Used URL: "+e);}else{d.isPageIdLiked(g,function(i,h){b(i,h);});}});},pageIdCache:[],getPageIdByUrl:function(c,b){var f=c.replace(/^(https?\:\/\/)?(www.)?facebook.com\/?/,"");var e=this;var d=false;a.each(this.pageIdCache,function(g,h){if(h.url==h){d=h.pageId;return false;}});if(d&&b){b(d);return;}window.FB.api("/",{id:f},function(g){if(!g.error){e.pageIdCache.push({url:f,pageId:g.id});b(g.id);}else{b(false,g.error.message);}});return;},isPageIdLiked:function(c,b,d){var e=this;this._logger&&this._logger.debug("Entry point $.onepress.isPageIdLiked [isPageIdLiked]");this._logger&&this._logger.debug("PageId: "+c);this._logger&&this._logger.debug("Access Token: "+(this._auth&&this._auth.accessToken));if(!c){return b(false,"The pageId is underfined.");}if(!this._auth.accessToken){return b(false,"The access tocken is not specified.");}a.ajax({url:"https://graph.facebook.com/me/likes/"+c,data:{access_token:this._auth.accessToken},dataType:"jsonp",success:function(f){e._logger&&e._logger.debug("A like state is got.");if(!f.error){e._logger&&e._logger.info("Data count: "+f.data.length);e._logger&&e._logger.debug(f,3);b(f.data.length>0);}else{e._logger&&e._logger.error(f.error.message);e._logger&&e._logger.error(f,3);b(false,f.error.message);}},error:function(g,h,f){e._logger&&e._logger.error("error: "+h+", "+f);e._logger&&e._logger.error("incoming Text: "+g.responseText);b(false,"Something wrong during the ajax requst.");}});}};})(jQuery);(function(a){if(a.fn.fblike){return;}a.onepress.widget("fblike",{options:{},_defaults:{onceEvent:true,url:null,sendButton:false,appId:0,lang:"en_US",layout:"standard",width:"auto",showFaces:false,verbToDisplay:"like",colorScheme:"light",font:"tahoma",ref:null,comment:true,permissions:null,render:null,like:null,dislike:null},_create:function(){var b=this;this._prepareOptions();this._setupEvents();this.element.data("facebook-widget",this);this._createButton();if(this.options.permissions){a.onepress.facebook.permissions=this.options.permissions;}a.onepress.facebook.loadSDK(this.options.appId,this.options.lang,function(){a.onepress.facebook.renderWidget(b.element);});},_prepareOptions:function(){var b=a.extend({},this._defaults);if(this.element.data("href")!==undefined){b.url=this.element.data("href");}if(this.element.data("send")!==undefined){b.sendButton=this.element.data("send");}if(this.element.data("layout")!==undefined){b.layout=this.element.data("layout");}if(this.element.data("show_faces")!==undefined){b.showFaces=this.element.data("show_faces");}if(this.element.data("width")!==undefined){b.width=this.element.data("width");}if(this.element.data("action")!==undefined){b.verbToDisplay=this.element.data("action");}if(this.element.data("font")!==undefined){b.font=this.element.data("font");}if(this.element.data("colorscheme")!==undefined){b.colorScheme=this.element.data("colorscheme");}if(this.element.data("ref")!==undefined){b.ref=this.element.data("ref");}b=a.extend(b,this.options);this.options=b;this.url=URL.normalize((!this.options.url)?window.location.href:this.options.url);},_setupEvents:function(){var b=this;a(document).bind("fb-init",function(){if(b.options.init){b.options.init();}});a(document).bind("fb-like",function(c,d){if(b.options.like&&b.url==URL.normalize(d)){b.options.like(d,b);}});a(document).bind("fb-dislike",function(c,d){if(b.options.dislike&&b.url==URL.normalize(d)){b.options.dislike(d,b);}});a(document).bind("fb-auth",function(c,d){alert("heere!");});a(this.element).bind("fb-render",function(){if(b.options.render){b.options.render(b.element,[b]);}});},_createButton:function(){var c;if(!this.element.is(".fb-like")){var b=a("<div class='fake-fb-like'></div>");b.data("facebook-widget",this);if(this.options.url){b.attr("data-href",this.options.url);}if(this.options.sendButton){b.attr("data-send",this.options.sendButton);}if(this.options.width){b.attr("data-width",this.options.width);}if(this.options.layout){b.attr("data-layout",this.options.layout);}b.attr("data-show-faces",this.options.showFaces);if(this.options.verbToDisplay){b.attr("data-action",this.options.verbToDisplay);}if(this.options.font){b.attr("data-font",this.options.font);}if(this.options.colorScheme){b.attr("data-colorscheme",this.options.colorScheme);}if(this.options.ref){b.attr("data-ref",this.options.ref);}this.element.append(b);c=this.element;}else{c=a("<div></div>").append(this.element);}c.addClass("ui-social-button ui-facebook ui-facebook-like");c.addClass("ui-facebook-like-"+(this.options.layout?this.options.layout:"standard"));},getHtmlToRender:function(){if(this.element.is(".fb-like")){return this.element.parent();}return this.element;}});})(jQuery);(function(a){if(a.fn.toLike){return;}a.onepress.widget("toLike",{options:{locker:{},facebook:{},events:{}},_defaults:{url:null,pageId:null,text:a.onepress.lang.tolike.defaultMessage,loginText:a.onepress.lang.tolike.loginMessage,style:null,highlight:true,demo:false,debug:false,locker:{force:false,inverse:false,close:false,timer:false,strict:false,mobile:true,loggedOnly:false,watchdog:15000,mobileFactor:false,mobileRedirectUrl:null},content:null,facebook:{sendButton:false,appId:0,lang:"en_US",layout:null,width:null,showFaces:false,verbToDisplay:"like",colorScheme:"light",font:"tahoma",permissions:null},events:{loginCompleted:null,lock:null,unlock:null,unlockByTimer:null,unlockByClose:null,unlockByWatchdog:null,ready:null}},_create:function(){var b=this;this._parseOptions();if(this.options.debug){this._logger=new a.onepress.logger(a("<div>").insertAfter(this.element));a.onepress.facebook.setLogger(this._logger);}if(a.onepress.isMobile()){this.options.locker.mobileFactor=true;}if(a.onepress.isMobile()&&!this.options.locker.mobile){b._preUnlock("mobile");return;}this._provider=(!this.options.locker.strict)?new a.onepress.localFacebookStoreStateProvider(this.url,this,this.options.demo):new a.onepress.strictStateProvider(this.url,this,this.options.demo);if(this._error){this.element.show();return;}this._setLoadingState(true);if(!b.options.locker.strict&&b._provider.isUnlocked()){b._preUnlock("provider");return;}if(this.options.locker.force){this._provider.isUnlocked()?this._unlock("provider"):this._lock("provider");return;}b._runWatchdog("[check-login]");this._checkLogin(function(d,c){b._stopWatchdog();if(b.options.locker.loggedOnly&&!c){b._preUnlock("loggedOnly");return;}b._showOverlay=!c;if(b.options.locker.strict){if(!c){b._lock("provider");if(b.options.events.ready){b.options.events.ready("locked");}return;}b._runWatchdog("[strict-mode-wait-provider]");b._provider.isUsable(function(f){b._stopWatchdog();b._showOverlay=!f;if(f){b._runWatchdog("[strict-mode-get-state]");b._provider.getState(function(g){b._stopWatchdog();!g?b._lock("provider"):b._unlock("provider");if(b.options.events.ready){b.options.events.ready(g?"unlocked":"locked");}});}else{b._lock("provider");if(b.options.events.ready){b.options.events.ready("locked");}}});}else{var e=b._provider.isUnlocked();!e?b._lock("provider"):b._unlock("provider");if(b.options.events.ready){b.options.events.ready(e?"unlocked":"locked");}}});},_parseOptions:function(){var b=a.extend(true,{},this._defaults,this.options);b.pageId=b.pageId||b.pageid;b.facebook.appId=b.facebook.appId||b.facebook.appid;if(!b.text){b.text=a.onepress.lang.tolike.defaultMessage;}b.text=(typeof b.text==="function"&&b.text(this))||(typeof b.text==="string"&&a("<div>"+b.text+"</div>"))||(typeof b.text==="object"&&b.text.clone());if(!b.loginText){b.loginText=a.onepress.lang.tolike.loginMessage;}b.loginText=(typeof b.loginText==="function"&&b.loginText(this))||(typeof b.loginText==="string"&&a("<div>"+b.loginText+"</div>"))||(typeof b.loginText==="object"&&b.loginText.clone());if(b.locker.timer&&!parseInt(b.locker.timer)){b.locker.timer=null;}b.locker.watchdog=parseInt(b.locker.watchdog);if(b.locker.force){b.locker.strict=false;b.locker.loggedOnly=false;}if(!b.facebook.appId){this._setError("Set Facebook App ID to use the Like 2 Unlock plugin. Create an app here: https://developers.facebook.com/apps");return;}this.url=this.url||this.options.url||window.location.href;this.identity=a.onepress.tools.hash(this.url);this.element.addClass("identity-"+this.identity).addClass("ui-locker-content");this.options=b;},_runWatchdog:function(c){if(!this.options.locker.watchdog){return;}var b=this;this._watchdog=setTimeout(function(){b._stoppedByWatchdog=true;b._unlock("watchdog");if(c&&console){var d="Watchdog: "+c;(console.debug&&console.debug(d))||(console.log&&console.log(d));}},this.options.locker.watchdog);},_stopWatchdog:function(){if(!this._watchdog){return;}clearTimeout(this._watchdog);this._watchdog=null;},_checkLogin:function(b){a.onepress.facebook.loadSDK(this.options.facebook.appId,this.options.facebook.lang,function(){a.onepress.facebook.isLogged(function(d,c){b(d,c);});});},_setLoadingState:function(c){if(!c){if(this.loadingState){this.loadingState.remove();}return;}var b=(this.element.parent().is("a"))?this.element.parent():this.element;this.loadingState=a("<div class='ui-locker-loading-holder'></div>").insertAfter(b);this.element.hide();},_setError:function(b){this._error=true;this._errorText=b;this._setLoadingState(false);this.locker&&this.locker.hide();this.element.html("<strong>[Error]: "+b+"</strong>");this.element.show().addClass("ui-facebook-locker-error");},_createMarkup:function(){var d=this;var c=(jQuery.browser.mozilla&&"mozilla")||(jQuery.browser.opera&&"opera")||(jQuery.browser.webkit&&"webkit")||"msie";this.locker=a("<div class='ui-locker-facebook ui-locker-"+c+"'></div>").hide();this.outerWrap=a("<div class='ui-locker-outer-wrap'></div>").appendTo(this.locker);this.innerWrap=a("<div class='ui-locker-inner-wrap'></div>").appendTo(this.outerWrap);this.element.addClass("ui-locker-content");this.locker.addClass(this.options.style);if(this.options.locker.mobileFactor){this.locker.addClass("ui-locker-mobile");}this.options.text.addClass("ui-locker-text").show();this.options.text.prepend((a("<div class='ui-locker-decorator-3'></div>")));this.options.text.append((a("<div class='ui-locker-decorator-4'></div>")));this.buttonsWrap=a("<div class='ui-locker-buttons'></div>");this.buttonWrap=a("<div class='ui-locker-button'></div>").appendTo(this.buttonsWrap);this.buttonsWrap.prepend(a("<div class='ui-locker-decorator-5'></div>"));this.innerWrap.append(a("<div class='ui-locker-decorator-1'></div>"));if(this.options.locker.inverse){this.innerWrap.append(this.buttonsWrap);this.innerWrap.append(this.options.text);this.locker.addClass("ui-locker-inverse");}else{this.innerWrap.append(this.options.text);this.innerWrap.append(this.buttonsWrap);}this.innerWrap.append(a("<div class='ui-locker-decorator-2'></div>"));this.buttonsWrap.append((a("<div class='ui-locker-decorator-6'></div>")));if(this._createSocialButtons){this._createSocialButtons(this.locker,this.buttonWrap);}this.options.locker.close&&this._createCloseButton();this.options.locker.timer&&this._createTimer();var b=(this.element.parent().is("a"))?this.element.parent():this.element;this.locker.insertAfter(b);this._showOverlay&&this._createOverlay();this._markupIsCreated=true;if(this.options.locker.mobileFactor){var e=a.onepress.getParamsFromUrl(window.location.href);if(e.l2u){if(d.options.events.loginCompleted){d.options.events.loginCompleted();}}}},_createCloseButton:function(){var b=this;this.closeButton=a("<div title='"+a.onepress.lang.tolike.close+"' class='ui-locker-close-icon'></div>");this.closeButton.prependTo(this.locker);this.closeButton.click(function(){if(!b.close||b.close(b)){b._unlock("close");}});},_createTimer:function(){this.timer=a("<span class='ui-locker-timer'></span>");var b=a.onepress.lang.tolike.orWait;this.timerLabel=a("<span class='ui-locker-timer-label'>"+b+" </span>").appendTo(this.timer);this.timerCounter=a("<span class='ui-locker-timer-counter'>"+this.options.locker.timer+"s</span>").appendTo(this.timer);this.timer.appendTo(this.locker);this.counter=this.options.locker.timer;this._kickTimer();},_createOverlay:function(){var e=this;var d=a("<div class='ui-locker-overlay'></div>").prependTo(e.locker);d.css({marginTop:"-"+e.locker.css("borderTopWidth"),marginLeft:"-"+e.locker.css("borderLeftWidth")});var b=function(f){f.css({width:e.locker.outerWidth(),height:e.locker.outerHeight()});};var c=a("<div class='ui-locker-overlay-message'></div>").prependTo(this.locker);this.options.loginText.addClass("ui-locker-overlay-text").appendTo(c);a("<div class='ui-locker-overlay-button'></div>").appendTo(c);if(!this.options.locker.mobileFactor){c.css("opacity",0);d.css("opacity",0.05);this.locker.hover(function(){b(d);c.css("marginTop",-c.outerHeight()/2);d.stop().animate({opacity:0.8},500);c.stop().animate({opacity:1},500);},function(){d.stop().animate({opacity:0.05},500);c.stop().animate({opacity:0},500);});}else{c.css("opacity",1);d.css("opacity",0.5);}d.add(c).click(function(){var f=e.options.locker.mobileRedirectUrl||window.location.href;a.onepress.facebook.login(e.options.locker.mobileFactor,f,function(g){if(!g){return;}if(e.options.events.loginCompleted){e.options.events.loginCompleted();}if(!e.options.locker.strict){a(document).trigger("fb-login");return;}e._provider.getState(function(i,h){a(document).trigger("fb-login");if(i){e._unlock("provider");}});});});a(document).bind("fb-login",function(){d.add(c).hide();});},_kickTimer:function(){var b=this;setTimeout(function(){if(!b._isLocked){return;}b.counter--;if(b.counter<=0){b._unlock("timer");}else{b.timerCounter.text(b.counter+"s");if(a.browser.opera){var c=b.timerCounter.clone();c.insertAfter(b.timerCounter);b.timerCounter.remove();b.timerCounter=c;}b._kickTimer();}},1000);},_recreateFacebookButton:function(){if(!this.socialButton){return;}var b=this.backup.clone().insertAfter(this.socialButton);this.socialButton.remove();this._createSocialButtons(this,b);},_createSocialButtons:function(d,b){var e=this;var c=a.extend({},this.options.facebook);if(this.options.url){c.url=this.options.url;}c.like=function(){e._unlock("button");};c.dislike=function(){e._lock("button");};this.backup=b.clone();this.socialButton=b.fblike(c);a(document).bind("fb-login",function(){e._recreateFacebookButton();});},_lock:function(c,b){this._setLoadingState(false);if(this._isLocked||this._stoppedByWatchdog){return;}if(!this._markupIsCreated){this._createMarkup();}if(c=="button"){this._provider.setState("locked");}this.element.hide();this.locker.fadeIn(1000);this._isLocked=true;if(this.options.events.lock){this.options.events.lock(this);}},_unlock:function(d,c){var b=this;this._setLoadingState(false);if(d=="watchdog"&&this.options.events.unlockByWatchdog){return this.options.events.unlockByWatchdog();}if(!this._isLocked){this._showContent(true);return false;}if(d=="button"){this._provider.setState("unlocked");}this._showContent(true);this._isLocked=false;if(d=="timer"&&this.options.events.unlockByTimer){return this.options.events.unlockByTimer();}if(d=="close"&&this.options.events.unlockByClose){return this.options.events.unlockByClose();}if(this.options.events.unlock){this.options.events.unlock();}},_preUnlock:function(c,b){this._setLoadingState(false);this._showContent(false);if(this.options.events.ready){this.options.events.ready("unlocked");}},_showContent:function(h){var g=this;var f=function(){if(g.locker){g.locker.hide();}if(!h){g.element.show();return;}g.element.fadeIn(1000,function(){g.options.highlight&&g.element.effect&&g.element.effect("highlight",{color:"#fffbcc"},800);});};if(!this.options.content){f();}else{if(typeof this.options.content==="string"){this.element.html(this.options.content);f();}else{if(typeof this.options.content==="object"&&!this.options.content.url){this.element.append(this.options.content.clone().show());f();}else{if(typeof this.options.content==="object"&&this.options.content.url){var b=a.extend(true,{},this.options.content);var e=b.success;var c=b.complete;var d=b.error;b.success=function(i,k,j){!e?g.element.html(i):e(g,i,k,j);f();};b.error=function(j,k,i){g._setError("An error is triggered during the ajax request! Text: "+k+" "+i);d&&d(j,k,i);};b.complete=function(i,j){c&&c(i,j);};a.ajax(b);}else{f();}}}}}});a.fn.tolike=function(b){b=a.extend({},b);a(this).toLike(b);};})(jQuery);(function(a){a.onepress.localFacebookStoreStateProvider=function(d,b,c){this.url=d;this.identity="page_"+a.onepress.tools.hash(d)+"_fb";this.isUsable=function(e){e(true);};this.lock=function(){};this.isUnlocked=function(){if(c){return false;}return(this._getValue())?true:false;};this.isLocked=function(){return !this.isUnlocked();};this.getState=function(e){e(this.isUnlocked());};this.setState=function(e){if(c){return false;}return e=="unlocked"?this._setValue():this._removeValue();};this._setValue=function(){if(localStorage){localStorage.setItem(this.identity,true);}else{a.onepress.tools.cookie(this.identity,true,{expires:356*10,path:"/"});}};this._getValue=function(){if(!localStorage){return a.onepress.tools.cookie(this.identity);}var e=localStorage.getItem(this.identity);if(e){return e;}e=a.onepress.tools.cookie(this.identity);if(e){this._setValue();}return e;};this._removeValue=function(){if(localStorage){localStorage.removeItem(this.identity);}a.onepress.tools.cookie(this.identity,null);};};a.onepress.strictStateProvider=function(e,b,c){var d=this;this.url=e;this.api=b;this.loggedIntoFacebook=false;this.isUsable=function(f){this.api._checkLogin(function(h,g){d.loggedIntoFacebook=g;if(f){f(h);}});};this.getState=function(f){if(c){return f(false);}if(d.api.options.pageId){a.onepress.facebook.isPageIdLiked(d.api.options.pageId,function(h,g){if(g){d.api._setError(g);return;}if(f){f(h,g);}});}else{a.onepress.facebook.isUrlLiked(d.url,function(h,g){if(g){d.api._setError(g);return;}if(f){f(h,g);}});}};this.setState=function(){};};})(jQuery);